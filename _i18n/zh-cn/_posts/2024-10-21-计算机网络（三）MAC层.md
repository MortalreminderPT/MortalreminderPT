---
layout: post
title: 计算机网络（三）MAC层
description:
date: 2024-10-21 18:22:11 +0800
image: https://www.koombea.com/wp-content/uploads/2024/02/Essentials-of-Enterprise-Networking-1100x616.webp
tags:
- Computer Network
category: ['Computer Network']
---

1. 目录
{:toc}

### 媒体访问控制（MAC）层

媒体访问控制（MAC）层负责管理广播网络中共享通信信道的访问，确定多个用户如何高效共享信道，最小化冲突并最大化吞吐量。

---

### 静态信道分配
静态信道分配将信道固定分配给不同用户，适用于用户数量已知且稳定的场景。

- **方法：**
  - **时分多路复用（TDM）：** 将时间分成固定时隙，每个时隙分配给特定用户。
  - **频分多路复用（FDM）：** 将信道分成固定的频率段，每个用户分配一个频段。

**示例：**
调频广播（FM Radio）使用静态信道分配，因为信道数量稳定且每个频段永久分配。

**优点：**
- 简单易用
- 分配公平且预测性强

**缺点：**
- 负载变化或突发流量下效率低下
- 缺乏动态调整能力

---

### ALOHA 协议
ALOHA 协议无需中央控制，通过冲突后重传的方式动态分配信道，效率因流量负载而异。

#### 纯 ALOHA
- 用户有数据时随时传输。
- 如果发生冲突，随机延迟后重传。
- 在低负载下简单有效，但高流量下因碰撞频繁而效率低。

#### 时隙 ALOHA
- 将时间分成固定时隙，必须在时隙开始时传输。
- 通过减少碰撞概率提高吞吐量，相比纯 ALOHA 效率更高。

**对比：**
- 纯 ALOHA 在低负载时延迟较小，但碰撞率较高。
- 时隙 ALOHA 通过同步传输减少碰撞，但会引入一定延迟。

---

### 载波侦听多路访问（CSMA）
CSMA 通过在传输前侦听信道减少碰撞，具体包括以下几种变体：

#### 持久性 CSMA
- 持续监测信道。
- 信道空闲时立即传输，若发生冲突，随机延迟后重试。

#### 非持久性 CSMA
- 周期性检测信道；信道忙时等待随机时间后重试。
- 减少碰撞，但可能增加信道空闲时间。

#### p-持久性 CSMA
- 适用于分时信道：
  - 信道空闲时以概率 $ p $ 传输；
  - 以 $ 1-p $ 的概率推迟到下一时隙再检测。
- 在持久性和冲突风险之间寻找平衡。

**关键观察：**
- CSMA 在各种负载下均优于 ALOHA，尤其在高流量下。
- 非持久性和低概率持久性变体在高负载条件下表现更优。

---

### 无碰撞协议
无碰撞协议通过有序访问信道完全避免冲突。

#### 位图协议
- 每个站点通过一个位（bit）声明是否有数据要发送。
- 根据站点顺序依次传输数据。
- 效率：$ \text{利用率} = \frac{d}{d+N} $，其中 $ d $ 为帧长度，$ N $ 为站点数量。

#### 二进制倒计时协议
- 站点按二进制地址优先级排序，逐位解决冲突。
- 效率：$ \text{利用率} = \frac{d}{d+\log N} $。

**形象类比：**
二进制倒计时类似“举手规则”，优先权较高的参与者更早获得发言权。

---

### 有限竞争协议
结合竞争协议和无碰撞协议的优点：

- 低负载时表现出色，延迟短（类似竞争协议）。
- 高负载时无需处理碰撞，提高效率（类似无碰撞协议）。

#### 自适应树遍历
- 采用分层结构，将冲突站点分成更小的组逐层解决。
- 站点按“树”结构下移，直到只剩一个站点成功传输。

**示例流程：**
- 初始发生冲突的站点分组，逐层减少冲突，直到所有站点成功传输。

---

### MACA 协议
MACA（多路访问冲突避免）通过控制消息解决隐蔽终端和暴露终端问题：

- **隐蔽终端问题：** 节点间因彼此不可见而造成冲突。
- **暴露终端问题：** 节点错误地认为不能同时传输，导致效率降低。

**解决方法：**
1. 发送方发送“发送请求（RTS）”。
2. 接收方回复“发送许可（CTS）”，通知附近节点。
3. 数据传输完成后，通过“确认（ACK）”释放信道。

**优势：**
- 避免隐蔽节点的碰撞。
- 允许暴露节点同时传输，提高效率。

---

### 以太网帧格式与性能
以太网利用 MAC 层进行信道访问，因其简单和可扩展性广泛应用。

#### 帧格式：
- **前导码：** 用于同步。
- **目标/源地址：** 标识发送方和接收方。
- **载荷：** 传输数据。
- **CRC 校验：** 检测传输错误。

#### 性能：
- **CSMA/CD（冲突检测）：** 通过检测和解决冲突高效利用信道。
- 吞吐量依赖流量负载，在中等负载条件下表现最佳。

---

### 总结
MAC 层在共享信道访问中起着关键作用。根据流量模式、负载和网络需求选择合适的协议（静态、ALOHA、CSMA 等），在简单性、效率和公平性之间寻求平衡。