---
layout: post 
title: 操作系统（十四）线程的概念 
description: 进程（Process）是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位。
date: 2022-04-22 02:24:51 +0800 
image: /images/covers/操作系统-cover2.png
tags:
- 操作系统
---

1. 目录
{:toc}

## 为什么要引入线程？

在一个程序运行过程中，可能需要同时进行视频聊天、传输文件等多种功能，而进程是程序的一次执行，这些功能显然不能通过一个程序顺序处理就能实现。

有的进程可能需要“同时”做很多事，而传统的进程只能串行地执行一系列程序。为此，引入了“线程”，来增加并发度。

<img src='\images\posts\操作系统-进程-线程概念.jpg'
  style="
    display: block;
    margin-left: auto;
    margin-right: auto; 
    zoom:50%;" />

传统的进程是程序执行流的最小单位；引入线程后，线程成为程序执行流的最小单位。

可以把线程理解为“轻量级进程”。

**线程**是一个**基本的CPU执行单元**，也是**程序执行流的最小单位**。
引入线程之后，不仅是进程之间可以并发，进程内的**各线程之间也可以并发**，从而进一步**提升了系统的并发度**，使得一个进程内也可以并发处理各种任务（如QQ视频、文字聊天、传文件）。

引入线程后，**进程**只作为**除CPU之外的系统资源的分配单元**（如打印机、内存地址空间等都是分配给进程的）。

## 引入线程后带来的变化

资源分配、调度：
- 传统进程机制中，进程是资源分配、调度的基本单位；
- 引入线程后，进程是资源分配的基本单位，线程是调度的基本单位。

并发性：
- 传统进程机制中，只能进程间并发；
- 引入线程后，各线程间也能并发，提升了并发度。

系统开销：
- 传统的进程间并发，需要切换进程的运行环境，系统开销很大；
- 线程间并发，如果是同一进程内的线程切换，则不需要切换进程环境，系统开销小；
- 引入线程后，并发所带来的系统开销减小。

## 线程的属性

1. 线程是处理机调度的单位；
2. 多CPU计算机中，各个线程可占用不同的CPU；
3. 每个线程都有一个线程ID、线程控制块（TCB）；
4. 线程也有就绪、阻塞、运行三种基本状态；
5. 线程几乎不拥有系统资源；
6. 同一进程的不同线程间共享进程的资源；
7. 由于共享内存地址空间，同一进程中的线程间通信甚至无需系统干预；
8. 同一进程中的线程切换，不会引起进程切换；
9. 不同进程中的线程切换，会引起进程切换；
10. 切换同进程内的线程，系统开销很小；
11. 切换进程，系统开销较大。
